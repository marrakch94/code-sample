<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="header">
                        <div *ngIf="this.userId !== 0; else create">
                            <h4 class="title">Edit Profile</h4>
                        </div>
                        <ng-template #create>
                            <h4 class="title">Create Profile</h4>
                        </ng-template>
                    </div>
                    <div class="content">
                        <form #form="ngForm" (ngSubmit)="sendUser(form)" [formGroup]="userForm" *ngIf="this.userForm">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Username</label>
                                        <input type="text" class="form-control" name="userName"
                                               formControlName="userName"
                                               required="required" placeholder="Username">
                                        <div *ngIf="(userForm.get('userName').invalid &&
                                        (userForm.get('userName').touched || userForm.get('userName').dirty || submitClicked))"
                                             class="span-alert">
                                            <span *ngIf="userForm.get('userName').hasError('required') ">Required fields *</span>
                                            <span *ngIf="userForm.get('userName').hasError('username') ">Please enter a valid email address</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Password</label>
                                        <input type="password" class="form-control" name="password"
                                               formControlName="password"
                                               required="required" placeholder="Password">
                                        <div *ngIf="(userForm.get('password').invalid &&
                                        (userForm.get('password').touched || userForm.get('password').dirty || submitClicked))"
                                             class="span-alert">
                                            <span *ngIf="userForm.get('password').hasError('required') ">Required fields *</span>
                                            <span *ngIf="userForm.get('password').hasError('minlength') ">At least 6 characters</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Email address</label>
                                        <input type="email" class="form-control" placeholder="Email" name="email"
                                               formControlName="email"
                                               required="required">
                                        <div *ngIf="(userForm.get('email').invalid &&
                                        (userForm.get('email').touched || userForm.get('email').dirty || submitClicked))"
                                             class="span-alert">
                                            <span *ngIf="userForm.get('email').hasError('required') ">Required fields *</span>
                                            <span *ngIf="userForm.get('email').hasError('email') ">Please enter a valid email address</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>First Name</label>
                                        <input type="text" class="form-control" placeholder="First Name"
                                               name="surname" formControlName="surname"
                                               required="required">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Last Name</label>
                                        <input type="text" class="form-control" placeholder="Last Name" name="name"
                                               formControlName="name"
                                               required="required">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Address</label>
                                        <input type="text" class="form-control" placeholder="Home Address"
                                               name="adresse" formControlName="adresse">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>City</label>
                                        <input type="text" class="form-control" placeholder="City" name="city"
                                               formControlName="city">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Country</label>
                                        <input type="text" class="form-control" placeholder="Country" name="country"
                                               formControlName="country">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Postal Code</label>
                                        <input type="number" class="form-control" placeholder="ZIP Code"
                                               name="codepost" formControlName="codepost">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Salary</label>
                                        <input type="number" class="form-control" placeholder="City" name="salary"
                                               formControlName="salary">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>role</label>
                                        <select name="roles" required class="form-control" formControlName="roles">
                                            <option value="ROLE_USER">USER</option>
                                            <option value="ROLE_ADMIN">ADMIN</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label style="padding-top: 35px;">Enabled Profile</label>
                                        <input type="checkbox" class="checkbox-circle" placeholder="ZIP Code"
                                               name="enabled" formControlName="enabled" value="true"
                                               style="margin-left: 12px;">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Phone Number</label>
                                        <input type="tel" class="form-control" placeholder="Phone Number"
                                               name="phoneNumber" formControlName="phoneNumber" value="true">
                                    </div>
                                </div>
                            </div>
                            <div class="custom-file">
                                <input type="file" accept="image/*" name="profileImage"
                                       formControlName="profileImage"
                                       (change)="onProfileImageChange($event.target.files[0].name, $event.target.files[0])"
                                       class="custom-file-input">
                                <label class="custom-file-label"><span [hidden]="!fileName">{{ fileName }}</span>
                                    <span [hidden]="fileName">Choose File</span>
                                </label>
                            </div>
                            <div *ngIf="this.userId !== 0; else createButton">
                                <button type="submit" class="btn btn-info btn-fill pull-right" [disabled]="form.invalid">Update Profile
                                </button>
                            </div>
                            <ng-template #createButton>
                                <button type="submit" class="btn btn-info btn-fill pull-right" [disabled]="form.invalid">Create Profile
                                </button>
                            </ng-template>
                            <div class="clearfix"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
